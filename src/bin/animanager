#!/usr/bin/env python3

import logging
import atexit

from animanager import db
from animanager import locator
from animanager import scene
from animanager.scene import menu

logging.basicConfig(
    filename='animanager.log',
    format='%(asctime)s %(levelname)s %(name)s %(message)s',
    level=logging.DEBUG)


def main():

    locator.db = db.AnimeDB()
    atexit.register(locator.db.close)

    locator.stack = scene.SceneStack()
    locator.stack.add((menu.main_menu, [], {}))

    locator.stack.run()

if __name__ == "__main__":
    main()
